<html>
  <head>
    <meta charset="utf-8">
    <title>VR Builder</title>
    <meta name="description" content="VR Builder">

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://unpkg.com/aframe-aabb-collider-component@3.1.0/dist/aframe-aabb-collider-component.js"></script>
    <script crossorigin src="js/aframe-util.js"></script>
    <script crossorigin src="js/html.js"></script>
    <script crossorigin src="js/touch-source.js"></script>
    <script crossorigin src="js/toucher.js"></script>
    <script crossorigin src="js/monitor.js"></script>
    <script crossorigin src="js/placement.js"></script>
    <script crossorigin src="js/reparenting.js"></script>
    <script crossorigin src="js/cloneable.js"></script>
    <script crossorigin src="js/debugged.js"></script>
    <script crossorigin src="js/follower-constraint.js"></script>
    <script crossorigin src="js/follower.js"></script>
    <script crossorigin src="js/resizing.js"></script>
    <script crossorigin src="js/resizer.js"></script>
    <script crossorigin src="js/blind-release.js"></script>
    <script crossorigin src="js/grabber.js"></script>
    <script crossorigin src="js/fingertip.js"></script>
    <script crossorigin src="js/letterbox.js"></script>
    <script crossorigin src="js/keyboard.js"></script>
    <script crossorigin src="js/keyboard-space.js"></script>
    <script crossorigin src="js/typist-hand.js"></script>
    <script crossorigin src="js/flicker.js"></script>
    <script crossorigin src="js/monitor-home.js"></script>
    <script crossorigin src="js/stock-home.js"></script>
    <script crossorigin src="js/color.js"></script>
    <script crossorigin src="js/color-tweaker.js"></script>
    <script crossorigin src="js/tweaker-home.js"></script>
    <script crossorigin src="js/hand.js"></script>
    <script crossorigin src="js/planner.js"></script>
    <script crossorigin src="js/vr-builder.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="sky" src="https://cdn.glitch.com/a0e144b7-dc44-4d24-a07d-26b1afe59bcf%2F1_5m53UGd39unlP9G4-xyigQ.png?v=1591554726157" crossorigin="anonymous" />
        <a-mixin id="letterkey" material="color: gray" geometry="width: 0.08; depth: 0.08; height: 0.1"></a-mixin>
      </a-assets>

      <a-sky src="#sky" rotation="0 -90 0"></a-sky>
      
      <a-camera></a-camera>
      
      <a-entity width="4" position="0 3 -2">
        <a-text id="ddd" align="left" wrap-count="120" position="-2 0 0" baseline="top" value="debug text"></a-text>
      </a-entity>
      
      <a-box class="stock touchable" position="1 0 0" color="brown" width="0.3" depth="0.3" height="0.3"></a-box>

      <a-entity keyboard-space position="-0.4 0.65 -0.1">
        <a-box typist-hand hand-side="left" class="touchable" position="0.2 0.8 -0.6" opacity="0.5" width="0.03" depth="0.02" height="0.02">
          <a-sphere fingertip color="red" radius="0.015" position="0.1 -0.08 -0.05"></a-sphere>
          <a-sphere fingertip color="red" radius="0.015" position="0.1  0.08 -0.05"></a-sphere>
          <a-sphere fingertip color="red" radius="0.015" position="0.07  0.08 0.05"></a-sphere>
        </a-box>

        <a-box typist-hand hand-side="right" class="touchable" position="0.6 0.8 -0.6" opacity="0.5" width="0.03" depth="0.02" height="0.02">
          <a-sphere fingertip color="red" finger="left" radius="0.015" position="-0.1  0.08 -0.05"></a-sphere>
          <a-sphere fingertip color="red" finger="right" radius="0.015" position="-0.1 -0.08 -0.05"></a-sphere>
          <a-sphere fingertip color="red" finger="thumb" radius="0.015" position="-0.07 0.08 0.05"></a-sphere>
        </a-box>

        <a-entity scale="0.3 0.3 0.3">

          <a-text id="keyed" align="left" wrap-count="60" position="-0.5 1.7 -1.2" baseline="top" value="keyed input\na"></a-text>

          <a-box letterbox="space" position="0.8 1.1 -0.3" width="1.2" mixin="letterkey"></a-box>
          <a-box letterbox="enter" position="1.8 1 -0.3" width="0.4" mixin="letterkey"></a-box>
          <a-box letterbox="back" position="2.2  1 -0.9" width="0.4" mixin="letterkey"></a-box>

          <a-entity keyboard>
            <a-entity position="0.2 0 0">
              <a-box letterbox="z" position="0   1 -0.5" mixin="letterkey"></a-box>
              <a-box letterbox="x" position="0.2 1 -0.5" mixin="letterkey"></a-box>
              <a-box letterbox="c" position="0.4 1 -0.5" mixin="letterkey"></a-box>
              <a-box letterbox="v" position="0.6 1 -0.5" mixin="letterkey"></a-box>
              <a-box letterbox="b" position="0.8 1 -0.5" mixin="letterkey"></a-box>
              <a-box letterbox="n" position="1.0 1 -0.5" mixin="letterkey"></a-box>
              <a-box letterbox="m" position="1.2 1 -0.5" mixin="letterkey"></a-box>
            </a-entity>

            <a-entity position="0.1 0 0">
              <a-box letterbox="a" position="0   1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="s" position="0.2 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="d" position="0.4 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="f" position="0.6 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="g" position="0.8 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="h" position="1.0 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="j" position="1.2 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="k" position="1.4 1 -0.7" mixin="letterkey"></a-box>
              <a-box letterbox="l" position="1.6 1 -0.7" mixin="letterkey"></a-box>
            </a-entity>

            <a-entity position="0 0 0">
              <a-box letterbox="q" position="0   1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="w" position="0.2 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="e" position="0.4 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="r" position="0.6 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="t" position="0.8 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="y" position="1.0 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="u" position="1.2 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="i" position="1.4 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="o" position="1.6 1 -0.9" mixin="letterkey"></a-box>
              <a-box letterbox="p" position="1.8 1 -0.9" mixin="letterkey"></a-box>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>

      <a-entity id="left-hand" hand-side="left"></a-entity>
      <a-entity id="right-hand" hand-side="right"></a-entity>

    </a-scene>

    <script>
      $(window).on('load', function() {
        var vr_builder = VrBuilder($('a-scene'), Hand($('#left-hand')), Hand($('#right-hand')))
        vr_builder.load()
      })
      $(document).ready(function() {
        setupGlobalErrorLogging()    
      })
    </script>
  </body>
</html>
